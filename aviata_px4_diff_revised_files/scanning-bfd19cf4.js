System.register(["./chunk-vendor.js","./chunk-frameworks.js"],(function(e,t){"use strict";var n,o,r,s,c;return{setters:[function(e){n=e.a,o=e.o,r=e.j},function(e){s=e.A,c=e.R}],execute:function(){function e(e){const t=document.createElement("input");return t.setAttribute("type","hidden"),t.setAttribute("name",e.name),t.setAttribute("value",e.value),t}n("change",".js-scanning-alert-check",(function({currentTarget:t}){const n=t.closest(".js-scanning-alert-list"),o=null!=n.querySelector(".js-scanning-alert-check:checked"),r=n.querySelector(".js-scanning-filter-options"),s=n.querySelector(".js-scanning-alert-bulk-actions"),c=n.querySelector(".js-scanning-alert-links");r&&(r.hidden=o),s&&(s.hidden=!o),c&&(c.hidden=o),function(t){let n=!1;const o=t.querySelectorAll(".js-scanning-fixed-alert-numbers"),r=0!==o.length?JSON.parse(o[0].getAttribute("data-numbers")||"[]"):[];for(const s of t.querySelectorAll(".js-scanning-bulk-action-items")){s.innerHTML="";const o=t.querySelectorAll(".js-scanning-alert-list [data-check-all-item]:checked");for(const t of o)n||(n=-1!==r.indexOf(parseInt(t.value))),s.appendChild(e(t))}for(const e of t.querySelectorAll(".js-scanning-reopen-button"))e.hidden=n;for(const e of t.querySelectorAll(".js-scanning-reopen-button-disabled"))e.hidden=!n}(n)})),n("details-menu-selected",".js-scanning-code-path-menu",(function(e){const t=e.detail.relatedTarget.getAttribute("data-target-code-path");for(const n of document.querySelectorAll(".js-scanning-code-path"))n.hidden=t!==n.getAttribute("data-code-path")}),{capture:!0}),o(".js-add-secret-format-button",{add(){window.postProcessingExpressionCount=0}}),n("click",".js-add-secret-format-button",(e=>{const t=e.currentTarget;if(t&&window.postProcessingExpressionCount<3){const e=document.querySelectorAll(".js-additional-secret-format");if(!e)return;for(const n of e)if(n.classList.contains("has-removed-contents")){n.classList.toggle("has-removed-contents",!1),window.postProcessingExpressionCount++,3===window.postProcessingExpressionCount&&(t.hidden=!0);break}}})),n("click",".js-remove-secret-format-button",(e=>{const t=document.querySelector(".js-add-secret-format-button");if(!t)return;const n=e.currentTarget;if(!n)return;const o=n.closest(".js-additional-secret-format");if(!o)return;o.classList.toggle("has-removed-contents",!0);o.getElementsByClassName("js-post-processing-input")[0].value="",window.postProcessingExpressionCount--,window.postProcessingExpressionCount<3&&(t.hidden=!1)})),o(".js-test-code",{async add(){const e=document.querySelector(".js-test-code"),n=e.clientHeight,o=await t.import("./chunk-codemirror.js");if(window.codeEditor=o.default.fromTextArea(e,{lineNumbers:!1,lineWrapping:!0,mode:"text/x-yaml",inputStyle:"contenteditable",value:e.value,lineSeparator:"\r\n",theme:"github-light"}),0!==n){const e=document.querySelector(".CodeMirror");e&&(e.style.height=n+"px",e.style.width="640px",e.style.border="1px solid #e1e4e8",e.style.borderRadius="6px")}window.codeEditor.save(),window.codeEditor.on("change",(()=>{a(window.codeEditor.getValue())}))}}),s(".js-add-custom-secret-scanning-pattern-form *",(async function(e){a(window.codeEditor.getValue(),e)})),c("keydown",".js-add-custom-secret-scanning-pattern-form *",(function(e){"Enter"===e.key&&e.preventDefault()}));const i=(e,t,n)=>{const o=document.createElement("input");o.type="hidden",o.name=t,o.id=t,o.value=n,e.appendChild(o),o.required=!0},a=r((function(e,t){!async function(e,t){if(t){const e=t.currentTarget;if(e&&"display_name"===e.id)return}const n=document.querySelector(".js-create-custom-pattern-button");if(!(n instanceof HTMLElement))return;if(0===e.length)n.setAttribute("disabled","true");else{window.codeEditor.save();const e=document.querySelector(".js-test-custom-secret-scanning-pattern");if(!(e instanceof HTMLFormElement))return;const t=document.querySelector(".js-error-banner");if(!t)return;const r=document.querySelector(".js-add-custom-secret-scanning-pattern-form");if(!(r instanceof HTMLFormElement))return;const s=document.querySelector(".js-test-pattern-matches");if(!s)return;for(const n of r.elements)n instanceof HTMLInputElement&&n.name&&("text"===n.type||"radio"===n.type&&n.checked)&&i(e,n.name,n.value);let c;try{const t=await fetch(e.action,{method:e.method,body:new FormData(e),headers:{Accept:"application/json"}});t.ok&&(c=await t.json())}catch(o){}if(c)if(c.error)c.error.message&&(t.hidden=!1,t.firstElementChild&&(t.firstElementChild.textContent=c.error.message),n.setAttribute("disabled","true"));else{t.hidden=!0,n.removeAttribute("disabled");const e=[];if(c.has_matches){const t=JSON.parse(c.matches);for(const o of t)e.push(JSON.stringify(o));const n=[...new Set(e)];1===t.length?s.textContent=" - 1 match":s.textContent=` - ${n.length} matches`,d();for(const e of t){const t=window.codeEditor.posFromIndex(e.start),n=window.codeEditor.posFromIndex(e.end);window.codeEditor.markText(t,n,{className:"bg-yellow-2"})}}else s.textContent=" - No matches",d()}}}(e,t)}),300);function d(){const e=window.codeEditor.posFromIndex(0),t=window.codeEditor.posFromIndex(window.codeEditor.getValue().length);for(const n of window.codeEditor.findMarks(e,t))n.clear()}}}}));
//# sourceMappingURL=scanning-a79b4ff8.js.map
